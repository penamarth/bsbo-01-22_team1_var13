### **Рамки.** Приложение электронной доски объявлений.

### **Уровень.** Задача, определенная пользователем.

### **Основной исполнитель.** Зарегистрированный пользователь (покупатель).

### **Заинтересованные лица и их требования:**

- **Покупатель (зарегистрированный пользователь).** Хочет быстро и безопасно оплатить покупку товара, получив подтверждение об успешной транзакции и ожидаемой доставке.
- **Продавец (зарегистрированный пользователь).** Хочет получить уведомление о покупке и средства на свой счет после успешной транзакции.
- **Система платежей.** Хочет корректно обработать платеж, обеспечив безопасность транзакции.
- **Администратор.** Хочет гарантировать, что транзакции и обмен товарами происходят корректно и в соответствии с правилами платформы.
- **Компания.** Хочет генерировать доход от комиссии за успешные сделки и обеспечивать удовлетворенность пользователей.

### **Предусловия:**

- И покупатель, и продавец зарегистрированы и аутентифицированы в системе.
- Продавец уже разместил свое объявление с товаром, который доступен для покупки.

### **Результаты (Постусловия):**

- Покупатель успешно оплатил товар и получил подтверждение об оплате и доставке.
- Продавец получил уведомление о покупке и ожидает перевода средств.
- Платеж успешно обработан и зафиксирован.
- Система обновила соответствующие данные для учета и статистики.

### **Основной успешный сценарий:**

1. **Покупатель** находит объявление, соответствующее его интересам, и переходит на его страницу.
2. **Система** отображает полную информацию о товаре, включая цену и условия доставки.
3. **Покупатель** подтверждает желание купить товар, нажимая кнопку "Купить".
4. **Система** рассчитывает итоговую стоимость, включая возможные дополнительные сборы (доставка, комиссия и т.д.), и предлагает произвести оплату.
5. **Покупатель** выбирает способ оплаты.
6. **Система** перенаправляет покупателя на интерфейс выбранной **Системы платежей**.
7. **Покупатель** вводит платежные данные и подтверждает оплату.
8. **Система платежей** обрабатывает платеж и отправляет подтверждение об успешной транзакции.
9. **Система** получает подтверждение, уведомляет покупателя об успешной оплате, а продавца — о том, что его товар куплен.
10. **Покупатель** и **Продавец** могут следить за статусом доставки и получения товара через систему.

### **Расширения (альтернативные потоки):**

- **2а.** Покупатель хочет задать вопрос продавцу перед покупкой.
  1. **Покупатель** выбирает опцию "Задать вопрос".
  2. **Система** перенаправляет покупателя в чат с продавцом для уточнения деталей.
  3. **Покупатель** после получения ответа может вернуться к процессу покупки.

- **4а.** Покупатель имеет промокод или скидку.
  1. **Покупатель** вводит промокод.
  2. **Система** проверяет валидность промокода и пересчитывает стоимость покупки.
    - **2а1.** Промокод недействителен.
      1. **Система** уведомляет покупателя о недействительности промокода.
      2. **Покупатель** может ввести другой промокод или продолжить без него.

- **6а.** Покупатель выбирает оплату позже (если такая опция доступна).
  1. **Система** сохраняет заказ как неоплаченный.
  2. **Покупатель** может завершить покупку в течение ограниченного времени.

- **8а.** Платеж не прошел успешно.
  1. **Система платежей** уведомляет об ошибке платежа.
  2. **Система** информирует покупателя о неудачной попытке оплаты.
  3. **Покупатель** может попробовать снова или выбрать другой способ оплаты.

- **9а.** Связь с системой платежей потеряна.
  1. **Система** уведомляет покупателя о технической проблеме.
  2. **Покупатель** может повторить попытку позже.


- **10а.** Товар больше недоступен (например, был продан другому пользователю).
  1. **Система** уведомляет покупателя о том, что товар больше недоступен.
  2. **Покупатель** может выбрать другой товар или прекратить покупку.

### **Специальные требования:**

- Интерфейс должен быть интуитивно понятным и доступным для пользователей с разным уровнем технической подготовки.
- Система должна обеспечивать безопасность обработки персональных и платежных данных.
- Операция оплаты должна занимать не более 2 минут в 95% случаев.
- Возможность локализации интерфейса на разные языки.
- Поддержка различных способов оплаты (банковские карты, электронные кошельки и т.д.).

### **Список технологий и типов данных:**

- **6а.** Платежные данные вводятся через защищенное соединение (SSL/TLS).
- **Промокоды** хранятся в базе данных и имеют сроки действия и условия применения.
- **Платежные системы** интегрированы через API и поддерживают стандартные протоколы безопасности.

### **Частота использования:**

- Ожидается высокая частота использования, особенно в пиковые часы активности пользователей.

### **Открытые вопросы:**

- Какие дополнительные способы оплаты следует поддерживать?
- Требуется ли модерация покупателей для предотвращения мошенничества?
- Как обрабатывать случаи возврата средств при спорных ситуациях?
